<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
    <script type="text/javascript">
        // TODO: 完善整个用户接口交互，包括选择文本,对比示范编程
        
        // 浏览器初始化加载完毕后开始执行
        window.onload = function () {
            var button = document.getElementById("previewButton")
            // 监听用户点击 preview 按钮，触发回调函数 previewHandler
            button.onclick = previewHandler
        }

        function previewHandler() {
            var canvas = document.getElementById("tshirtCanvas")
            var context = canvas.getContext("2d")
            
            // 每点击一次预览，重新渲染画布一次
            fillBackgroundColor(canvas, context)


            var selectObj = document.getElementById("shape")
            var index = selectObj.selectedIndex
            var shape = selectObj[index].value
            // 控制台输出当前用户的形状选择
            console.log(shape);

            // 根据用户选择去执行画方形或者圆圈
            if (shape === "squares") {
                // 每一次点击预览按钮就渲染20个方块
                for (var squares = 0; squares < 20; squares++){
                    drawSquare(canvas, context)
                }
            } else if (shape === "circles") {
                for (let circle = 0; circle < 20; circle++) {
                    drawCircle(canvas, context)
                }
            }

            // 根据用户选择去执行
            
        }

        function drawSquare(canvas, context) {
            context.fillStyle = "rgb(0, 173, 239)"
            var w = Math.floor(Math.random() * 40)
            var x = Math.random() * canvas.width
            var y = Math.random() * canvas.height
            context.fillRect(x, y, w, w)
        }

        function drawCircle(canvas, context) {
            var x = Math.random() * canvas.width
            var y = Math.random() * canvas.height
            var z =  Math.floor(Math.random() * 30)
            context.beginPath()
            context.arc(x, y, z, 0, degreesToRadians(360), true)
            context.fillStyle = "lightblue"
            context.fill()
            context.stroke()
        }

        // 度转换为弧度
        function degreesToRadians(degrees) {
            return (degrees * Math.PI)/180
        }

        function fillBackgroundColor(canvas, context) {
            // 调试语句
            console.log("你调用了fillBackGroundColor这个函数");

            var selectObj = document.getElementById("backgroundColor")
            var index = selectObj.selectedIndex
            var bgColor = selectObj[index].value
            context.fillStyle = bgColor
            context.fillRect(0, 0, 600, 200)
        }
        
        

     
        // 从用户获取选择的文本颜色值
        // var selectObj = document.getElementById("foregroundColor")
        // var index = selectObj.selectedIndex
        // var fgColor = selectObj[index].value


    </script>
</head>
<body>
    <h1>TweetShirt</h1>
    <canvas id="tshirtCanvas" width="600" height="200">
        <p>请升级您的浏览器以至于正常使用</p>
    </canvas>
    <form action="">
        <p>
            <label for="">选择背景颜色：</label>
            <select name="" id="backgroundColor">
                <option value="white" selected="selected">White</option>
                <option value="black" >Black</option>
            </select>
        </p>
        <p>
            <label for="">圆圈还是方形？</label>
            <select name="" id="shape">
                <option value="none" selected="selected">Neither</option>
                <option value="circles">Circles</option>
                <option value="squares">Squares</option>
            </select>
        </p>
        <p>
            <label for="">选择文本颜色：</label>
            <select name="" id="foregroundColor">
                <option value="black" selected="selected">Black</option>
                <option value="white">White</option>
            </select>
            
        </p>
        <p>
            <label for="tweets">选择要分享的人：</label>
            <select name="" id="tweets">
            </select>
        </p>
        <p>
            <input type="button" id="previewButton" value="Preview">
        </p>
    </form>
</body>
</html>